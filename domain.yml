version: '2.0'
config:
  store_entities_as_slots: true
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
#########################################
# intents
#########################################
intents:
- greet:
    use_entities: true
- goodbye:
    use_entities: true
- affirm:
    use_entities: true
- deny:
    use_entities: true
- mood_great:
    use_entities: true
- mood_unhappy:
    use_entities: true
- bot_challenge:
    use_entities: true
- complete:
    use_entities: true
- new_user:
    use_entities: true
- coffee_size:
    use_entities: true
- confused:
    use_entities: true
- nlu_fallback:
    use_entities: true
#########################################
# entities
#########################################
entities:
- size
#########################################
# slots
#########################################
slots:
  water_tank:
    type: bool
    influence_conversation: true
  insert_capsule:
    type: bool
    influence_conversation: true
  cup:
    type: bool
    influence_conversation: true
  size:
    type: bool
    influence_conversation: true
#########################################
# responses
#########################################
responses:
  utter_greet:
  - text: Hello.
  utter_offer_assistance:
  - text: I am Furhat. I can provide assistance in making a coffee. Is this your first time using this coffee machine?
#  utter_water_tank_level:
#  - text: Please make sure the water tank is filled above the line. Tell me done when you are finished.
  utter_dispense_coffee:
  - text: OK please wait while I dispense the coffee. Be sure to release the handle again for the next person.
#  utter_choose_capsule:
#  - text: This machine uses capsules, each capsule will create a different flavour of coffee. They come in different flavours and intensities. Please select a capsule and tell me done when you are finished.
#  utter_insert_capsule:
#  - text: You will need to place the capsule inside the machine. Firstly make sure the handle is lifted and the hole on top of the machine is exposed. The capsule then should be placed inside the hole. Please tell me done with you are finished.
#  utter_handle_down:
#  - text: Make sure that after the capsule is in the machine that you put the handle down. This may take a little bit of force as it is piercing the sealed coffee capsule. Once the handle is fully down tell me done.
#  utter_affirm_cup:
#  - text: Please make sure that you have place a cup under the spout. Tell me done when you are finished.
#  utter_get_coffee_size:
#  - text: There are two sizes of coffee available, a long or a short shot. Please tell me which one you would like.
  utter_did_that_help:
  - text: Did that help you?
  utter_happy:
  - text: Great, carry on!
  utter_goodbye:
  - text: Bye
  utter_out_of_scope:
  - text: Sorry, I don't understand what you said
  utter_ask_water_tank:
    - text: Is the water tank level above the line?
  utter_ask_insert_capsule:
    - text: Place your capsule in the top of the machine and pull the handle down.
  utter_ask_cup:
    - text: Please make sure that you have place a cup under the spout.
  utter_ask_size:
    - text: There are two sizes of coffee available, a long or a short shot. Please tell me which one you would like.

#########################################
# actions
#########################################
actions:
- utter_greet
- utter_dispense_coffee
#########################################
# forms
#########################################
forms:
  first_time_form:
    water_tank:
    - intent: affirm
      type: from_intent
      value: true
    - intent: deny ## TO DO - handle this and empty long short entity
      type: from_intent
      value: false
    insert_capsule:
    - intent: complete
      type: from_intent
      value: true
    cup:
    - intent: complete
      type: from_intent
      value: true
    size:
    - entity: size
      type: from_entity 
#    - intent:
#      - inform
#      - cc_payment_form
#      type: from_text
#########################################
# e2e action
#########################################
e2e_actions: []


# to do
#
# 1. fix no option with water tank - just add new action
# 2. .py file clear slots AND entites for long and short upon new person using machine
# 3. create new form for experienced user
# 4. create new manager form for story selction
# 5. detect divergence?? (alana should do this for chit chat bot, else - just ask question again (we do this already))
# 6. TRAIN!!!!!
