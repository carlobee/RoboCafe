version: "2.0"

stories:

- story: water ok + experienced user
  steps:
    - intent: greet
    - action: utter_greet
    - action: utter_introduction
    - action: water_tank_form
    - active_loop: water_tank_form
    - slot_was_set:
      - requested_slot: water_tank
    - slot_was_set:
      - water_tank: true  # water is above the level
    - active_loop: null
    - action: choose_user_form
    - active_loop: choose_user_form
    - slot_was_set:
      - requested_slot: choose_user
    - slot_was_set:
      - choose_user: true # user is familiar with machine
    - active_loop: null
    - action: experienced_user_form
    - active_loop: experienced_user_form
    - slot_was_set:
      - requested_slot: size
    - slot_was_set:
      - size: long  # user wants a long coffee
    - active_loop: null
    - action: utter_dispense_coffee
    - action: action_reset_slots
    - intent: goodbye
    - action: utter_goodbye

- story: water low + experienced user
  steps:
    - intent: greet
    - action: utter_greet
    - action: utter_introduction
    - action: water_tank_form
    - active_loop: water_tank_form
    - slot_was_set:
      - requested_slot: water_tank
    - slot_was_set:
      - water_tank: false # Water tank is not above the line
    - active_loop: null
    - action: fill_water_form
    - active_loop: fill_water_form
    - slot_was_set:
      - requested_slot: fill_water
    - slot_was_set:
      - fill_water: true  # Water tank has been filled
    - active_loop: null
    - action: choose_user_form
    - active_loop: choose_user_form
    - slot_was_set:
      - requested_slot: choose_user
    - slot_was_set:
      - choose_user: true # User is experienced
    - active_loop: null
    - action: experienced_user_form
    - active_loop: experienced_user_form
    - slot_was_set:
      - requested_slot: size
    - slot_was_set:
      - size: long
    - active_loop: null
    - action: utter_dispense_coffee
    - action: action_reset_slots
    - intent: goodbye
    - action: utter_goodbye


- story: water OK + non-experienced user
  steps:
    - intent: greet
    - action: utter_greet
    - action: utter_introduction
    - action: water_tank_form
    - active_loop: water_tank_form
    - slot_was_set:
      - requested_slot: water_tank
    - slot_was_set:
      - water_tank: true  # Water tank is above the level
    - active_loop: null
    - action: choose_user_form
    - active_loop: choose_user_form
    - slot_was_set:
      - requested_slot: choose_user
    - slot_was_set:
      - choose_user: false  # User is not familiar with the machine
    - active_loop: null
    - action: first_time_form
    - active_loop: first_time_form
    - slot_was_set:
      - requested_slot: insert_capsule
    - slot_was_set:
      - insert_capsule: true
    - slot_was_set:
      - requested_slot: cup
    - slot_was_set:
      - cup: true
    - slot_was_set:
        - requested_slot: size
    - slot_was_set:
        - size: long
    - active_loop: null
    - action: utter_dispense_coffee
    - action: action_reset_slots
    - intent: goodbye
    - action: utter_goodbye

- story: water low + non-experienced user
  steps:
    - intent: greet
    - action: utter_greet
    - action: utter_introduction
    - action: water_tank_form
    - active_loop: water_tank_form
    - slot_was_set:
      - requested_slot: water_tank
    - slot_was_set:
      - water_tank: false # Water tank is not filled
    - active_loop: null
    - action: fill_water_form
    - active_loop: fill_water_form
    - slot_was_set:
      - requested_slot: fill_water
    - slot_was_set:
      - fill_water: true  # Water has been filled
    - active_loop: null
    - action: choose_user_form
    - active_loop: choose_user_form
    - slot_was_set:
      - requested_slot: choose_user
    - slot_was_set:
      - choose_user: false  # User is not familiar with the machine
    - active_loop: null
    - action: first_time_form
    - active_loop: first_time_form
    - slot_was_set:
      - requested_slot: insert_capsule
    - slot_was_set:
      - insert_capsule: true
    - slot_was_set:
      - requested_slot: cup
    - slot_was_set:
      - cup: true
    - slot_was_set:
        - requested_slot: size
    - slot_was_set:
        - size: long
    - active_loop: null
    - action: utter_dispense_coffee
    - action: action_reset_slots
    - intent: goodbye
    - action: utter_goodbye
